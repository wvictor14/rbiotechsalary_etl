version: 2

models:
  - name: int_companies_harmonized_names
    description: >
      Step 1. Harmonizes company names using name-mapping seed.

      See {{ doc('companies') }} for companies modelling strategy.
    columns:
    
      - name: raw_company_name
        data_type: string
        description: The original company name as provided by the respondent. This  is used for joins 
          harmonization and is not intended for analysis.

      - name: company_name
        data_type: string
        description: >
          Trims whitespace. See {{ doc('company_name') }} for overall strategy

      - name: company_size
        data_type: string
        description: ""

      - name: sector
        data_type: string
        description: ""

      - name: company_is_private_or_public
        data_type: string
        description: ""

  - name: int_companies_consolidated
    description: >
      
      Step 2. One row per company, takes the most frequent of size, sector, and 
      public/private.

      For those responses that did not provide a company name, we remove these 
      here. We treat "unknown" company names as a degenerate dimension.

      See {{ doc('companies') }} for companies modelling strategy.
    columns:
          
      - name: company_name
        data_type: string
        description: "{{ doc('company_name') }}"
        tests:
          - not_null
          - unique

      - name: company_size
        data_type: string
        description: ""

      - name: sector
        data_type: string
        description: ""

      - name: company_is_private_or_public
        data_type: string
        description: ""